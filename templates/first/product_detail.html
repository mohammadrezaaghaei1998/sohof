{% extends 'main/base.html' %}
{% load static %}
{% block content %}

<div class="container-cont vh-100">
    <div class="row justify-content-end" style="max-height: 500px;">
        <!-- Left card (Product Detail) -->
        <div class="col-md-8 col-lg-8 p-5">
            <div class="card-product-detail pt-5 pb-5">
                <div class="container-fluid">
                    <div class="wrapper row">
                        <div class="preview col-md-6">
                            <div class="preview-pic tab-content">
                                {% for image in product.images.all %}
                                    <div class="tab-pane {% if forloop.first %}active{% endif %}" id="pic-{{ forloop.counter }}">
                                        <img src="{{ image.image.url }}" height="250" alt="{{ product.name }}" style="object-fit: contain;">
                                    </div>
                                {% empty %}
                                    <p>No images available.</p>
                                {% endfor %}
                            </div>
                            <ul class="preview-thumbnail nav nav-tabs">
                                {% for image in product.images.all %}
                                    <li {% if forloop.first %}class="active"{% endif %}>
                                        <a data-target="#pic-{{ forloop.counter }}" data-toggle="tab">
                                            <img src="{{ image.image.url }}" height="100" width="100" alt="{{ product.name }}" style="object-fit: contain;">
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="details col-md-6">
                            <div class="row">
                                <div class="col-lg-12">
                                    <h3 class="product-title">{{ product.name }}</h3>
                                    <hr>
                                </div>
                               
                                <div class="col-lg-12">
                                    <p class="product-description">{{ product.description }}</p>
                                </div>
                                <div class="col-lg-12">
                                    <h5 class="company-name">Company Name:
                                        <span class="company-tile" data-toggle="tooltip">{{ product.SellerProfile.company_name }}</span>
                                    </h5>
                                </div>
                                <div class="col-lg-12">
                                    <h5 class="origin">Origin:
                                        <span class="origin-title" data-toggle="tooltip">{{ product.origin }}</span>
                                    </h5>
                                </div>
                                <div class="col-lg-12">
                                    <h5 class="colors">Status:
                                        {% if product.availability == 'out_of_stock' %}
                                            <span class="color red not-available" data-toggle="tooltip" title="Not In store"></span><span class="avalibility">Not Available</span>
                                        {% else %}
                                            <span class="color green avalible" data-toggle="tooltip" title="In store"></span><span class="avalibility">Available</span>
                                        {% endif %}
                                    </h5>
                                    
                                </div>
                               
                                
                            </div>
                            <hr>
                            <div class="col-lg-12 text-right">
                                <a href="javascript:void(0);" title="Add to wishlist" id="wishlist_button" data-product-id="{{ product.id }}">
                                    <i class="fa fa-heart" style="color: red; font-size: 20px; padding-right: 8px;"></i>
                                </a>
                            </div>
                            
                           
                        </div>
                    </div>









                </div>             
            </div>
            
            <!-- 
            <div class="col-md-12 mt-5">
                <h3 class="product-title">Key attributes</h3>
                <hr>


                <a href="#" data-toggle="collapse" data-target="#collapse_1" aria-expanded="true" class="">
                    <h6 class="title Industry-specific-attributes">
                        Industry-specific attributes <i class="icon-control fa fa-chevron-down"></i>
                    </h6>
                </a>
                <div class="collapse" id="collapse_1" style="  transition: height 0.5s ease-out, opacity 0.5s ease-out;">
                    <table class="blueTable mt-3">
                        <tbody>
                            <tr>
                                <td>Industrial Use</td>
                                <td>cell2_1</td>
                            </tr>
                            <tr>
                                <td>Paper Type</td>
                                <td>cell2_2</td>
                            </tr>
                            <tr>
                                <td>Feature</td>
                                <td>cell2_3</td>
                            </tr>
                        </tbody>
                    </table>
                </div>


                <a href="#" data-toggle="collapse" data-target="#collapse_2" aria-expanded="true" class="">
                    <h6 class="title mt-5 Industry-specific-attributes">
                        Other attributes<i class="icon-control fa fa-chevron-down"></i>
                    </h6>
                </a>
                <div class="collapse" id="collapse_2" style="  transition: height 0.5s ease-out, opacity 0.5s ease-out;">
                    <table class="blueTable mt-3">
                        <tbody>
                            <tr>
                                <td>Industrial Use</td>
                                <td>cell2_1</td>
                            </tr>
                            <tr>
                                <td>Paper Type</td>
                                <td>cell2_2</td>
                            </tr>
                            <tr>
                                <td>Feature</td>
                                <td>cell2_3</td>
                            </tr>
                            <tr>
                                <td>Industrial Use</td>
                                <td>cell2_1</td>
                            </tr>
                            <tr>
                                <td>Paper Type</td>
                                <td>cell2_2</td>
                            </tr>
                            <tr>
                                <td>Feature</td>
                                <td>cell2_3</td>
                            </tr>
                            <tr>
                                <td>Industrial Use</td>
                                <td>cell2_1</td>
                            </tr>
                            <tr>
                                <td>Paper Type</td>
                                <td>cell2_2</td>
                            </tr>
                            <tr>
                                <td>Feature</td>
                                <td>cell2_3</td>
                            </tr>
                            <tr>
                                <td>Industrial Use</td>
                                <td>cell2_1</td>
                            </tr>
                            <tr>
                                <td>Paper Type</td>
                                <td>cell2_2</td>
                            </tr>
                            <tr>
                                <td>Feature</td>
                                <td>cell2_3</td>
                            </tr>
                        </tbody>
                    </table>
                </div>



                
                <a href="#" data-toggle="collapse" data-target="#collapse_3" aria-expanded="true" class="">
                    <h6 class="title mt-5 Industry-specific-attributes">
                        Packaging and delivery <i class="icon-control fa fa-chevron-down"></i>
                    </h6>
                </a>
                <div class="collapse" id="collapse_3" style="  transition: height 0.5s ease-out, opacity 0.5s ease-out;">
                    <table class="blueTable mt-3">
                        <tbody>
                            <tr>
                                <td>Industrial Use</td>
                                <td>cell2_1</td>
                            </tr>
                            <tr>
                                <td>Paper Type</td>
                                <td>cell2_2</td>
                            </tr>
                            <tr>
                                <td>Feature</td>
                                <td>cell2_3</td>
                            </tr>
                        </tbody>
                    </table>
                </div>


                <div class="mt-5"></div>
                <h3 class="product-title">Lead Time</h3>
                <hr>


                <div class="mt-5"></div>
                <h3 class="product-title">Ratings & Reviews</h3>
                <hr>
                <div class="rating-review">
                    <div class="row align-items-center">
                        <div class="col-auto text-center" style="font-size: 50px; font-weight: bold;">
                            3.5
                        </div>
                        
                        <div class="col">
                            <div class="d-flex align-items-center">
                                <div class="stars">
                                    <span class="fa fa-star checked"></span>
                                    <span class="fa fa-star checked"></span>
                                    <span class="fa fa-star checked"></span>
                                    <span class="fa fa-star"></span>
                                    <span class="fa fa-star"></span>
                                </div>
                                <div class="ml-3 review-level">
                                    Not Too Bad
                                </div>
                            </div>
                            <div class="review-base">
                                Based on 41 reviews
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container-cont py-5">
                    <div class="row d-flex justify-content-start">
                        <div class="col-md-12 col-lg-12 col-xl-12">
                            <div class="card review-card p-2">
                                <div class="card-body review-body">
                                    <div class="d-flex flex-start align-items-center">
                                        <img class="rounded-circle shadow-1-strong me-3"
                                        src="{% static 'assets/images/confident2.jpg' %}" alt="avatar" width="60"
                                        height="60" />
                                        <div class="ml-3 review-user">
                                            <h6 class="fw-bold text-danger mb-1">Shaghayegh Tavakoli</h6>
                                            <p class="text-muted small mb-0">
                                                Shared publicly - Jan 11, 2020
                                            </p>
                                        </div>
                                    </div>
                        
                                    <p class="mt-3 mb-4 pb-2">
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                                        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                        quis nostrud exercitation ullamco laboris nisi ut aliquip consequat.
                                    </p>
                        
                                    <div class="small d-flex justify-content-start">
                                        <a href="#!" class="d-flex align-items-center me-3 mr-2 review-icons">
                                            <i class="fa fa-thumbs-o-up me-2 mr-2"></i>
                                            <p class="mb-0">Like</p>
                                        </a>
                                        <a href="#!" class="d-flex align-items-center me-3 review-icons">
                                            <i class="fa fa-comment-o me-2 mr-2"></i>
                                            <p class="mb-0">Comment</p>
                                        </a>
                                    </div>
                                    <div class="card-body mt-4 ml-5 pl-3 border-start border-3" style="border-color: #17a2b8;">
                                        <div class="d-flex flex-start align-items-center">
                                           
                                            <div class="review-user supplier-reply">
                                                <h6 class="fw-bold  mb-1">Supplier's reply:</h6>
                                            </div>
                                        </div>
                                
                                        <p class="mt-2 mb-2 ml-4">
                                            Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quibusdam minus veritatis incidunt laborum blanditiis, eos itaque cupiditate. Enim animi consectetur vitae ut iste placeat nobis at molestias facere voluptas voluptate soluta impedit ratione, reiciendis inventore corrupti eum officia perferendis. Aut veritatis tenetur, maxime blanditiis ex a natus deleniti! Numquam, beatae.
                                        </p>
                                    </div>
                                </div>
                                <div class="card-body review-body">
                                    <div class="d-flex flex-start align-items-center">
                                        <img class="rounded-circle shadow-1-strong me-3"
                                        src="{% static 'assets/images/confident2.jpg' %}" alt="avatar" width="60"
                                        height="60" />
                                        <div class="ml-3 review-user">
                                            <h6 class="fw-bold text-danger mb-1">Shaghayegh Tavakoli</h6>
                                            <p class="text-muted small mb-0">
                                                Shared publicly - Jan 11, 2020
                                            </p>
                                        </div>
                                    </div>
                        
                                    <p class="mt-3 mb-4 pb-2">
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                                        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                        quis nostrud exercitation ullamco laboris nisi ut aliquip consequat.
                                    </p>
                        
                                    <div class="small d-flex justify-content-start">
                                        <a href="#!" class="d-flex align-items-center me-3 mr-2 review-icons">
                                            <i class="fa fa-thumbs-o-up me-2 mr-2"></i>
                                            <p class="mb-0">Like</p>
                                        </a>
                                        <a href="#!" class="d-flex align-items-center me-3 review-icons">
                                            <i class="fa fa-comment-o me-2 mr-2"></i>
                                            <p class="mb-0">Comment</p>
                                        </a>
                                    </div>
                                </div>
                                <div class="card-body review-body">
                                    <div class="d-flex flex-start align-items-center">
                                        <img class="rounded-circle shadow-1-strong me-3"
                                        src="{% static 'assets/images/confident2.jpg' %}" alt="avatar" width="60"
                                        height="60" />
                                        <div class="ml-3 review-user">
                                            <h6 class="fw-bold text-danger mb-1">Shaghayegh Tavakoli</h6>
                                            <p class="text-muted small mb-0">
                                                Shared publicly - Jan 11, 2020
                                            </p>
                                        </div>
                                    </div>
                        
                                    <p class="mt-3 mb-4 pb-2">
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                                        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                        quis nostrud exercitation ullamco laboris nisi ut aliquip consequat.
                                    </p>
                        
                                    <div class="small d-flex justify-content-start">
                                        <a href="#!" class="d-flex align-items-center me-3 mr-2 review-icons">
                                            <i class="fa fa-thumbs-o-up me-2 mr-2"></i>
                                            <p class="mb-0">Like</p>
                                        </a>
                                        <a href="#!" class="d-flex align-items-center me-3 review-icons">
                                            <i class="fa fa-comment-o me-2 mr-2"></i>
                                            <p class="mb-0">Comment</p>
                                        </a>
                                    </div>
                                </div>
                                <div class="card-footer py-3 border-0" style="background-color: #f8f9fa;">
                                    <div class="d-flex flex-start w-100">
                                        <img class="rounded-circle shadow-1-strong me-3"
                                        src="{% static 'assets/images/confident2.jpg' %}" alt="avatar" width="40"
                                        height="40" />
                                        <div data-mdb-input-init class="form-outline w-100 ml-2">
                                            <textarea class="form-control" id="textAreaExample" rows="4"
                                                style="background: #fff;"></textarea>
                                            <label class="form-label" for="textAreaExample">Message</label>
                                        </div>
                                    </div>
                                    <div class="float-end mt-2 pt-1">
                                        <a href="#" class="btn btn-md btn-custom animate__animated animate__bounceIn animate__delay-.5s">Post Comment</a>
                                        <a href="#" class="btn btn-md btn-custom animate__animated animate__bounceIn animate__delay-.5s">cancel</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                 
            </div>         -->
        </div>


        <!-- Right card (Additional Information or Any Content) -->
        <div class="second-card col-md-3 col-lg-3 p-5">
            <div class="card second-card-des">
                <div class="card-header">
                    <h4>Additional Info</h4>
                </div>
                <div class="card-body">
                    <!-- Verified & Gold Mark -->
                    <p>
                        {% if seller.is_verified %}
                            <span style="color: green; font-size: 18px; margin-left: 10px;">
                                <i class="fa fa-check-circle"></i> Verified
                            </span>
                        {% endif %}
                        
                        {% if seller.is_gold %}
                            <span style="color: gold; font-size: 20px;">
                                <i class="fa fa-certificate"></i> Gold Member
                            </span>
                        {% endif %}
                    </p>
        
                    <p><i class="fa fa-building"></i> <strong>Company Name:</strong> {{ product.SellerProfile.company_name }}</p>
                    <p><i class="fa fa-industry"></i> <strong>Industry:</strong> {{ product.SellerProfile.fields_of_work }}</p>
                    <p><i class="fa fa-map-marker"></i> <strong>Location:</strong> {{ product.SellerProfile.company_location }}</p>
                    <p><i class="fa fa-envelope"></i> <strong>Contact Email:</strong> <a href="mailto:{{ product.SellerProfile.contact_email }}">{{ product.SellerProfile.contact_email }}</a></p>
                    <p><i class="fa fa-globe"></i> <strong>Website:</strong> <a href="{{ product.SellerProfile.website_url }}" target="_blank">{{ product.SellerProfile.website_url }}</a></p>
                </div>
        
                <!-- <hr>
        
                <div class="card-body">
                    <p><i class="fa fa-cogs"></i> <strong>Services Offered:</strong></p>
                    <ul>
                        <li>Web Development</li>
                        <li>Mobile App Development</li>
                        <li>Cybersecurity Solutions</li>
                    </ul>
                </div> -->
        
                <hr>
        
                    <div class="card-body">
                        <p><i class="fa fa-share-alt"></i> <strong>Follow Us</strong></p>
                        <div class="row">
                            {% if product.SellerProfile.facebook %}
                                <a href="{{ product.SellerProfile.facebook }}" target="_blank" class="d-block">
                                    <i class="fa fa-facebook-square m-2"></i> 
                                </a>
                            {% endif %}
                    
                            {% if product.SellerProfile.instagram %}
                                <a href="{{ product.SellerProfile.instagram }}" target="_blank" class="d-block">
                                    <i class="fa fa-instagram m-2"></i> 
                                </a>
                            {% endif %}
                    
                            {% if product.SellerProfile.linkedin %}
                                <a href="{{ product.SellerProfile.linkedin }}" target="_blank" class="d-block">
                                    <i class="fa fa-linkedin m-2"></i> 
                                </a>
                            {% endif %}
                    
                            {% if product.SellerProfile.youtube %}
                                <a href="{{ product.SellerProfile.youtube }}" target="_blank" class="d-block">
                                    <i class="fa fa-youtube m-2"></i> 
                                </a>
                            {% endif %}
                    
                            {% if product.SellerProfile.twitter %}
                                <a href="{{ product.SellerProfile.twitter }}" target="_blank" class="d-block">
                                    <i class="fa fa-twitter m-2"></i> 
                                </a>
                            {% endif %}
                        </div>
                    <hr>

                    <div class="card-body">
                        <a href="{% url 'seller_detail' product.SellerProfile.id %}" class="btn btn-md btn-custom animate__animated animate__bounceIn animate__delay-.5s w-100">
                            Visit Profile
                        </a>
                    </div>

                </div>
            </div>
        </div>
        
        
        </div>

      
    </div>

 
</div>


</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
    $('#wishlist_button').on('click', function() {
        var product_id = $(this).data('product-id');
        
        $.ajax({
            type: 'POST',
            url: '{% url "add_to_wishlist" %}',  
            data: {
                'product_id': product_id,
                'csrfmiddlewaretoken': '{{ csrf_token }}',  
            },
            success: function(response) {
                if (response.success) {
                    alert(response.message);
                } else {
                    alert(response.message); 
                }
            },
            error: function() {
                alert('An error occurred while adding the product to the wishlist.');
            }
        });
    });
});
</script>

{% endblock content %}
